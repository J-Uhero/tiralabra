# Viikkoraportti 2

Tällä viikolla pääsin jatkamaan projektia vasta perjantaina, joten tein perjantaina ja lauantaina hieman pidemmät päivät projektin parissa. 

Perjantaina aloitin projektin varsinaisen ohjelmointityön. Jo edellisellä viikolla olin pähkäillyt, miten saisin kuvista kaivettua tarvittavan datan ja visualisoitua karttoja. Lisäksi mietinnän alla oli, miten saan datan semmoseen muotoon, että pääsen sitä valituilla algoritmeilla hyödyntämään. Lähdin tutustumaan Pythonin Pillow-kirjastoon. Sain kurssimateriaaliin liitetyistä 2D-kartoista haetun karttakuvan avattua ja piirrettyä siihen janoja. Lisäksi tutkin, miten saan kuvan pikseleiden väritiedot kaivettua esiin, jotta pystyisin määrittämään, onko pikselin kohdalla solmu vai onko se este. Yhdeksi vaihtoehdoksi kuvan muuttamiseen matriisidataksi nousi NumPy-kirjasto, mutten päässyt kovin pitkälle siihen tutustumisessa.

Olin luonut luonnostellut ohjelman repositioon tiedostorakennetta, mutta kuvien piirtelyn ja analysoinnin tutkiminen heti alkuun tuntui ehkä väärältä ensiaskeleelta projektin tekoon. Algoritmien ja tässä tapauksessa reitinhaun kuuluisi olla keskiössä. Jätin siis nämä kirjastot, visualisoinnin ja datan keruun sivuun ja aloin kaivaa tietoa projektissani käytettävästä A*-algoritmista. Algoritmista löytyi ihan hyvin tietoa netistä ja aloin tutustumaan pariin eri artikkeliin ja algoritmin toimintaa kuvaavaan Youtube-videoon. Seuraavaksi pitikin kaivaa esille Tirakirja ja vanhat Tira2:n kurssitehtävät, koska Djikstan algoritmin päivittäminen muistiin alkoi tuntua luontevalta lähestymistavalta aiheeseen A*:n ja Dijkstan samankaltaisuuden tähden. Tirat olen käynyt vuosi sitten keväällä. Oman aikani aiheeseen tutustuttuani lähdin muodostamaan algoritmia itse. Jonkun verran pseudokoodin tuijottelua ja pohtimista algoritmin toteutus vaati, että sain sen toimimaan omassa ohjelmaympäristössä, jossa kuvasin verkkoa ja sen solmuja matriisina. Aiemmin olin toteuttanut Dijkstran algoritmin kuvaten solmuja kokonaislukuina ja kaaria lukupareina, joten tästä tämän toteutus tulisi hieman poikeamaan aiemmasta Tirassa käyttämästäni lähestymistavasta. En myöskään halunnut kuvata solmuja omina olioinaan, koska se tuntuisi raskaalta vaihtoehdolta, jos verkkoa voi kätevästi kuvata matriisinakin ja karttakuvissa voi pikselimäärä olla suuri.

Lopulta pienen debuggaamisen ja keyerror-virheiden korjailun jälkeen sain algoritmin toimimaan. Siihen tuli jonkun verran toistoa, miettiessäni miten kannattaa toteuttaa g-arvon vaihteleva lisäys yhden ja neliöjuuri kahden välillä. Mietin, haittaako tässä yhteydessä kuinka paljon toisteinen koodi, ei-kuvaavat muuttujien nimet tai funktiokutsut, kun tarkoitus olisi saada algoritmi toimimaan tehokkaasi. Ehkä tästä täytyy vielä kysellä. Käytin testidatana pieniä, itse näpyttelemiäni matriiseja, jotta pääsin tutkimaan algoritmin oikeellisuutta ja näkemään jotain visualisointia.  Tunteja tuli päivän aikana aika paljon eli noin 9,5 työskenneltyäni aamupäivästä iltaan asti, mutta olin tyytyväinen saadessani toisesta algoritmistani toimivan version valmiiksi.

Lähteet A*-algoritmiin tutustumisessa olen lisännyt ![toteutusdokumenttiin](https://github.com/J-Uhero/tiralabra/blob/main/dokumentaatio/toteutusdokumentti.md).

Lauantaina keskeisenä tekemisen kohteena oli algoritmin ja muun ohjelmakoodin kommentointi, testaus ja kaikki muu palautukseen liittyvä.  Käytyäni kommentoinnissa läpi algoritmin toimintaa tuntui se jo selvältä, eikä mitään tarvinnut alkaa tarkastamaan pseudokoodista tai muista lähteistä. Tein projektiin liittyviä ohtelta ja ohtulta tuttuja konfigurointiasioita, kuten koodin siisteyden tarkistamista pylintillä, testikattavuuden mittaamista ja raportointia codecov:n ja GitHub Actionsin avulla. Pylintin läpikäynnin jälkeen tein koodiin muutoksia ja tein tietenkin testejä testikattavuuden mittaamiseen. Koodin ulkoasuun liitettävät seikat mietityttivät, kuten toisteisen koodin ja liian lyhyiden muuttujien käyttö. Lyhyet muuttujannimet kuten f, g ja h tuntuivat tämän algoritmin yhteydessä perustelluilta ja mietin, hidastaakohan pitkät muuttujanimet algoritmin toimintaa kuinka paljon ja olisiko tärkeää saada ohjelmakoodi mahdollisimman ymmärrettäväksi ja helposti lähestyttäväksi, mitä tein toisaalta omalla koodin kommentoinnillani.

Varsinaista monipuolista käyttöliittymää en tämän viikon palautukseen saa luotua, mutta ajattelin, että tässä vaiheessa on keskeistä varsinainen ohjelman eli tässä tapauksessa algoritmin toiminnallisuus. Tein kuitenkin kahden kartan ASCII-visualisoinnin ohjelman ajamisen yhteydessä, joka ajaa tässä vaiheessa käyttöliittymän virkaa.

![Viikon 2 UI-näkymä](https://github.com/J-Uhero/tiralabra/blob/main/dokumentaatio/viikon2-ui-nakyma.png)

Seuraavalla viikolla aion koittaa tutustua JSP-algoritmiin ja mahdollisesti saada kuvien käsittely- ja visualisointipuolta eteenpäin.

Lisäksi tietysti käytin lauantaina aikaa dokumentointiin ja viikkoraportin kirjoittamiseen. Aikaa kului yhteensä noin 7 tuntia.
